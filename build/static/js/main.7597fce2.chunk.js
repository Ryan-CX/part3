(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(15),c=n.n(r),a=n(3),o=n.n(a),u=n(6),i=n(4),l=n(2),s=n(0),d=function(e){var t=e.filter,n=e.onFilterChange;return Object(s.jsxs)("div",{children:["Filter shown with ",Object(s.jsx)("input",{value:t,onChange:n})]})},h=function(e){var t=e.addName,n=e.newName,r=e.handleInputChange,c=e.newNumber,a=e.handleNumberChange;return Object(s.jsxs)("form",{onSubmit:t,children:[Object(s.jsxs)("div",{children:["name:",Object(s.jsx)("input",{type:"text",value:n,onChange:r})]}),Object(s.jsxs)("div",{children:["number:",Object(s.jsx)("input",{type:"text",value:c,onChange:a})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var t=e.personArr,n=e.deletePerson;return t.map((function(e){return Object(s.jsx)("div",{children:Object(s.jsxs)("li",{className:"note",children:[e.name," ",e.number,Object(s.jsx)("button",{onClick:function(){return n(e.id)},children:" Delete"})]},e.id)})}))},b=function(e){var t=e.FilterArr,n=e.filter,r=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));return 0===n.length?null:r.map((function(e,t){return Object(s.jsx)("li",{children:e.name},t)}))},f="http://localhost:3001/persons",m={getAll:function(){return o.a.get(f)},create:function(e){return o.a.post(f,e).then((function(e){return e.data}))},update:function(e,t){return o.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},deletePerson:function(e){return o.a.delete("".concat(f,"/").concat(e))}},O=function(e){var t=e.message;return null===t?null:Object(s.jsx)("div",{className:"error",children:t})},p=function(){var e=Object(l.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(l.useState)(""),a=Object(i.a)(c,2),o=a[0],f=a[1],p=Object(l.useState)(""),x=Object(i.a)(p,2),g=x[0],v=x[1],w=Object(l.useState)(""),C=Object(i.a)(w,2),N=C[0],y=C[1],P=Object(l.useState)(""),S=Object(i.a)(P,2),k=S[0],A=S[1];Object(l.useEffect)((function(){m.getAll().then((function(e){r(e.data)}))}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phone book"}),Object(s.jsx)(O,{message:k}),Object(s.jsx)(d,{filter:N,onFilterChange:function(e){y(e.target.value)}}),Object(s.jsx)(h,{addName:function(e){if(e.preventDefault(),o&&g){var t={name:o,number:g,id:n.length+1},c=n.find((function(e){return e.name.toLowerCase()===o.toLowerCase()}));if(c&&c.number!==g){if(window.confirm("".concat(c.name," is already added to phone book, replace the old number with a new one?"))){var a=Object(u.a)(Object(u.a)({},c),{},{number:g}),i=c.id;m.update(i,a).then((function(e){r(n.map((function(t){return t.id!==i?t:e}))),A("Number updated"),f(""),v(""),setTimeout((function(){A(null)}),3e3)})).catch((function(e){A("Something wrong happened while updating. Try again."),console.log(e),setTimeout((function(){A(null)}),3e3)}))}}else{if(c)return A("".concat(o," is already added to phone book.")),f(""),v(""),void setTimeout((function(){A(null)}),3e3);m.create(t).then((function(e){r(n.concat(e)),A("".concat(e.name," was added to the contact.")),f(""),v(""),setTimeout((function(){A(null)}),3e3)}))}}else alert("Please fill in the fields")},newName:o,handleInputChange:function(e){f(e.target.value)},newNumber:g,handleNumberChange:function(e){v(e.target.value)}}),Object(s.jsx)("h2",{children:"Name and Phone Number"}),Object(s.jsx)("ul",{children:Object(s.jsx)(j,{personArr:n,deletePerson:function(e){window.confirm("You sure you wanna delete it?")&&(m.deletePerson(e).then(r(n.filter((function(t){return t.id!==e})))).catch((function(e){console.log(e),A("No such person found.")})),A("Contact Deleted"),setTimeout((function(){A(null)}),3e3))}})}),Object(s.jsx)("h3",{children:"Filtered results"}),Object(s.jsx)("ul",{children:Object(s.jsx)(b,{FilterArr:n,filter:N})})]})};n(39);o.a.get("http://localhost:3001/persons").then((function(e){c.a.render(Object(s.jsx)(p,{}),document.getElementById("root"))}))}},[[40,1,2]]]);
//# sourceMappingURL=main.7597fce2.chunk.js.map