(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t.n(c),r=t(15),o=t.n(r),u=(t(20),t(6)),s=t(3),i=t(0),l=function(e){var n=e.handleSearch,t=e.searchTerm;return Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{children:"Filter shown with: "}),Object(i.jsx)("input",{onChange:n,value:t})]})},h=function(e){var n=e.onSubmit,t=e.handleNameChange,c=e.handleNumberChange,a=e.nameValue,r=e.numberValue;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{children:"Name: "}),Object(i.jsx)("input",{onChange:t,value:a})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{children:"Number: "}),Object(i.jsx)("input",{type:"tel",onChange:c,value:r})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"Add"})})]})},d=function(e){var n=e.data,t=e.searchTerm,c=e.onDeleteButtonClick,a=function(e,n){c&&c(e,n)};return!!n.length&&n.map((function(e){return e.name.toLowerCase().includes(t.toLowerCase())&&Object(i.jsxs)("p",{children:[e.name," : ",e.number,Object(i.jsx)("button",{onClick:a.bind(null,e.id,e.name),children:"Delete"})]},e.id)}))},b=t(4),f=t.n(b),j="http://localhost:3001/api/persons",m=function(){return f.a.get(j).then((function(e){return e.data}))},O=function(e){return f.a.post(j,e).then((function(e){return e.data}))},p=function(e){return f.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},v=function(e,n){return f.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){var n=e.message,t=e.type;return Object(i.jsx)("div",{className:"".concat("unsuccessful"===t?"notification--error":"notification--success"," notification"),children:n})};g.defaultProps={type:"successful"};var x=g,w=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),o=Object(s.a)(r,2),b=o[0],f=o[1],j=Object(c.useState)(""),g=Object(s.a)(j,2),w=g[0],C=g[1],y=Object(c.useState)(""),S=Object(s.a)(y,2),k=S[0],N=S[1],T=Object(c.useState)({}),D=Object(s.a)(T,2),L=D[0],V=D[1];Object(c.useEffect)((function(){m().then((function(e){a(e)})).catch((function(e){return console.warn(e)}))}),[]);var A=function(){f(""),C("")};Object(c.useEffect)((function(){if(L.message){var e=setTimeout((function(){return V({})}),4e3);return function(){return clearTimeout(e)}}}),[L]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:"Phone book"}),L.message&&Object(i.jsx)(x,{message:L.message,type:L.type,duration:3e3}),Object(i.jsx)(l,{searchTerm:k,handleSearch:function(e){return N(e.target.value)}}),Object(i.jsx)("h2",{children:"Add a new contact"}),Object(i.jsx)(h,{onSubmit:function(e){(e.preventDefault(),b&&w)?(t.filter((function(e){return e.name.toLocaleLowerCase()===b.toLowerCase()})).length?function(){var e=window.confirm("".concat(b," is already added to phone book, replace the old phone number with new one.")),n=t.find((function(e){return e.name===b})),c=Object(u.a)(Object(u.a)({},n),{},{number:w});e&&v(c.id,c).then((function(e){a(t.map((function(n){return n.id===e.id?e:n}))),V({message:"Replaced ".concat(b,"'s number.")})})).catch((function(e){console.warn(e),V({message:"Could not replace, as the information on ".concat(b," has already been removed from the server."),type:"unsuccessful"})}))}():function(){var e={name:b,number:w};O(e).then((function(e){a(t.concat(e))})).then(V({message:"Added ".concat(e.name,".")})).catch((function(e){return console.warn(e)}))}(),A()):V({message:"Please fill both fields.",type:"unsuccessful"})},handleNameChange:function(e){return f(e.target.value)},handleNumberChange:function(e){return C(e.target.value)},nameValue:b,numberValue:w}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(d,{data:t,searchTerm:k,onDeleteButtonClick:function(e,n){window.confirm("Delete ".concat(n,"?"))&&(p(e).then((function(){a(t.filter((function(n){return n.id!==e}))),V({message:"Deleted ".concat(n,"'s contact successfully.")})})).catch((function(e){V({message:"The information on ".concat(n," has already been removed from the server."),type:"unsuccessful"}),console.warn(e)})),A())}})]})};o.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(w,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.c969008f.chunk.js.map